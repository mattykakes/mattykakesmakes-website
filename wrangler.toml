# wrangler.toml for Hugo site built via npm and deployed on Cloudflare Pages
name = "mattykakesmakes"
main = "./public"          # Hugo outputs static files here by default
compatibility_date = "2025-10-07"

[build]
command = "npm run build"
cwd = "."                  # Run from repo root
upload.format = "directory"
upload.dir = "public"

# Enable Pages build caching to speed up subsequent builds
[build.cache]
enabled = true
# Cache node_modules and Hugo cache to avoid re-downloading dependencies or re-rendering everything
paths = ["node_modules", "resources"]

# Configure environment variables for Hugo and Node
[env.production]
HUGO_VERSION = "0.148.2"
NODE_VERSION = "22.14.0"
HUGO_ENV = "production"

# Optional: preview environment
[env.preview]
HUGO_VERSION = "0.148.2"
NODE_VERSION = "22.14.0"
HUGO_ENV = "development"

# Optionally define a custom routes file (for _redirects or _headers support)
#[site]
#bucket = "./public"
#custom_domain = "example.com"

